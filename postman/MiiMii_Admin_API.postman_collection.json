{
  "info": {
    "name": "MiiMii Admin API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "miimii-admin-api"
  },
  "item": [
    {
      "name": "Auth / Login",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/auth/login", "host": ["{{baseUrl}}"], "path": ["api","admin","auth","login"] },
        "body": { "mode": "raw", "raw": "{\n  \"email\": \"{{ADMIN_EMAIL}}\",\n  \"password\": \"{{ADMIN_PASSWORD}}\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - Login success",
          "originalRequest": { "method": "POST", "header": [ { "key": "Content-Type", "value": "application/json" } ], "url": { "raw": "{{baseUrl}}/api/admin/auth/login", "host": ["{{baseUrl}}"], "path": ["api","admin","auth","login"] }, "body": { "mode": "raw", "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"changeme\"\n}" } },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [ { "key": "Content-Type", "value": "application/json" } ],
          "body": "{\n  \"success\": true,\n  \"token\": \"<jwt-token>\"\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"errors\": [\n    {\n      \"type\": \"field\",\n      \"msg\": \"Invalid value\",\n      \"path\": \"email\",\n      \"location\": \"body\"\n    }\n  ]\n}"
        },
        {
          "name": "401 Unauthorized - Invalid credentials",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"error\": \"Invalid credentials\"\n}"
        },
        {
          "name": "500 Server Error - Not configured",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"error\": \"Admin auth not configured\"\n}"
        }
      ]
    },
    {
      "name": "Dashboard Overview",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/dashboard", "host": ["{{baseUrl}}"], "path": ["api","admin","dashboard"] }
      },
      "response": [
        {
          "name": "200 OK - Summary",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"overview\": {\n    \"totalUsers\": 120,\n    \"activeUsers\": 95,\n    \"totalTransactions\": 1540,\n    \"totalVolume\": 1250000.5,\n    \"pendingTransactions\": 7,\n    \"openTickets\": 3\n  },\n  \"kycStats\": {\n    \"incomplete\": 5,\n    \"pending\": 2,\n    \"verified\": 110,\n    \"rejected\": 3\n  },\n  \"transactionTypes\": [\n    { \"type\": \"data\", \"count\": 300, \"volume\": 150000 },\n    { \"type\": \"airtime\", \"count\": 500, \"volume\": 200000 }\n  ],\n  \"recentTransactions\": [\n    { \"reference\": \"TRX-123\", \"type\": \"data\", \"amount\": 1000, \"user\": \"John Doe\", \"status\": \"completed\", \"createdAt\": \"2024-01-01T12:00:00.000Z\" }\n  ]\n}"
        },
        {
          "name": "401 Unauthorized - Missing/invalid token",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"error\": \"Unauthorized\"\n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"error\": \"Failed to load dashboard\"\n}"
        }
      ]
    },
    {
      "name": "Users - List",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/users?page=1&limit=20", "host": ["{{baseUrl}}"], "path": ["api","admin","users"], "query": [{"key":"page","value":"1"},{"key":"limit","value":"20"}] }
      },
      "response": [
        {
          "name": "200 OK - Paginated users",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"pagination\": { \"page\": 1, \"limit\": 20, \"total\": 120, \"pages\": 6 },\n  \"users\": [\n    {\n      \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n      \"name\": \"John Doe\",\n      \"whatsappNumber\": \"0803XXXXXXX\",\n      \"email\": \"john@example.com\",\n      \"kycStatus\": \"verified\",\n      \"bvnVerified\": true,\n      \"bvnVerificationDate\": \"2023-11-01T10:30:00.000Z\",\n      \"onboardingStep\": \"completed\",\n      \"isActive\": true,\n      \"isBanned\": false,\n      \"balance\": 1200.5,\n      \"virtualAccountNumber\": \"1000000123\",\n      \"virtualAccountBank\": \"RUBIES MFB\",\n      \"lastSeen\": \"2024-01-01T10:00:00.000Z\",\n      \"createdAt\": \"2023-11-01T10:00:00.000Z\"\n    }\n  ]\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"errors\": [\n    { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"limit\", \"location\": \"query\" }\n  ]\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get users\" \n}"
        }
      ]
    },
    {
      "name": "Users - Details",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/users/{{userId}}", "host": ["{{baseUrl}}"], "path": ["api","admin","users","{{userId}}"] }
      },
      "response": [
        {
          "name": "200 OK - User details",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"user\": {\n    \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"whatsappNumber\": \"0803XXXXXXX\",\n    \"email\": \"john@example.com\",\n    \"kycStatus\": \"verified\",\n    \"isActive\": true,\n    \"isBanned\": false\n  },\n  \"wallet\": {\n    \"balance\": 1200.5,\n    \"virtualAccountNumber\": \"1234567890\",\n    \"virtualAccountBank\": \"BellBank\",\n    \"isActive\": true,\n    \"isFrozen\": false\n  },\n  \"stats\": {\n    \"totalTransactions\": 50,\n    \"totalVolume\": 500000\n  },\n  \"recentTransactions\": [],\n  \"supportTickets\": []\n}"
        },
        {
          "name": "404 Not Found - User missing",
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"User not found\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get user details\" \n}"
        }
      ]
    },
    {
      "name": "Wallet - Freeze",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/users/{{userId}}/wallet/freeze", "host": ["{{baseUrl}}"], "path": ["api","admin","users","{{userId}}","wallet","freeze"] },
        "body": { "mode": "raw", "raw": "{\n  \"reason\": \"Fraud investigation\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - Wallet frozen",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"success\": true,\n  \"message\": \"Wallet frozen\",\n  \"wallet\": { \n    \"isFrozen\": true,\n    \"freezeReason\": \"Fraud investigation\"\n  } \n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"errors\": [ { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"userId\", \"location\": \"params\" } ] \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to freeze wallet\" \n}"
        }
      ]
    },
    {
      "name": "Wallet - Unfreeze",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/users/{{userId}}/wallet/unfreeze", "host": ["{{baseUrl}}"], "path": ["api","admin","users","{{userId}}","wallet","unfreeze"] }
      },
      "response": [
        {
          "name": "200 OK - Wallet unfrozen",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"success\": true,\n  \"message\": \"Wallet unfrozen\",\n  \"wallet\": { \n    \"isFrozen\": false\n  } \n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"errors\": [ { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"userId\", \"location\": \"params\" } ] \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to unfreeze wallet\" \n}"
        }
      ]
    },
    {
      "name": "Wallet - Credit",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/users/{{userId}}/wallet/credit", "host": ["{{baseUrl}}"], "path": ["api","admin","users","{{userId}}","wallet","credit"] },
        "body": { "mode": "raw", "raw": "{\n  \"amount\": 1000,\n  \"description\": \"Admin credit\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - Wallet credited",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"success\": true,\n  \"message\": \"Wallet credited\",\n  \"result\": { \n    \"transactionId\": \"4a2b...\",\n    \"reference\": \"ADM-CR-001\",\n    \"amount\": 1000,\n    \"description\": \"Admin credit\"\n  } \n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"errors\": [ { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"amount\", \"location\": \"body\" } ] \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to credit wallet\" \n}"
        }
      ]
    },
    {
      "name": "Transactions - List",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/transactions?page=1&limit=20", "host": ["{{baseUrl}}"], "path": ["api","admin","transactions"], "query": [{"key":"page","value":"1"},{"key":"limit","value":"20"}] }
      },
      "response": [
        {
          "name": "200 OK - Paginated transactions",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"pagination\": { \"page\": 1, \"limit\": 20, \"total\": 200, \"pages\": 10 },\n  \"transactions\": [\n    {\n      \"id\": \"...\",\n      \"reference\": \"TRX-001\",\n      \"type\": \"debit\",\n      \"category\": \"data\",\n      \"amount\": 1000,\n      \"fee\": 0,\n      \"status\": \"completed\",\n      \"description\": \"1GB MTN\",\n      \"user\": \"John Doe\",\n      \"userPhone\": \"0803XXXXXXX\",\n      \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n      \"processedAt\": \"2024-01-01T12:00:10.000Z\"\n    }\n  ]\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"errors\": [ { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"status\", \"location\": \"query\" } ] \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get transactions\" \n}"
        }
      ]
    },
    {
      "name": "Data Pricing - Get All Plans",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/data-pricing", "host": ["{{baseUrl}}"], "path": ["api","admin","data-pricing"] }
      },
      "response": [
        {
          "name": "200 OK - All data plans with pricing",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"dataPlans\": {\n    \"MTN\": [\n      {\n        \"id\": 1,\n        \"title\": \"500MB\",\n        \"validity\": \"30days\",\n        \"type\": \"SME\",\n        \"retailPrice\": 380,\n        \"sellingPrice\": 450,\n        \"margin\": 70\n      },\n      {\n        \"id\": 2,\n        \"title\": \"1GB\",\n        \"validity\": \"30days\",\n        \"type\": \"SME\",\n        \"retailPrice\": 620,\n        \"sellingPrice\": 700,\n        \"margin\": 80\n      }\n    ],\n    \"AIRTEL\": [\n      {\n        \"id\": 25,\n        \"title\": \"1.1GB\",\n        \"validity\": \"30days\",\n        \"type\": \"SME\",\n        \"retailPrice\": 400,\n        \"sellingPrice\": 400,\n        \"margin\": 0\n      }\n    ]\n  },\n  \"overrides\": {\n    \"MTN\": { \"1\": 450, \"2\": 700 },\n    \"AIRTEL\": {}\n  }\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get data pricing\" \n}"
        }
      ]
    },
    {
      "name": "Data Pricing - Set Individual Plan",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/data-pricing/plan", "host": ["{{baseUrl}}"], "path": ["api","admin","data-pricing","plan"] },
        "body": { "mode": "raw", "raw": "{\n  \"network\": \"MTN\",\n  \"planId\": 1,\n  \"sellingPrice\": 450\n}" }
      },
      "response": [
        {
          "name": "200 OK - Plan pricing updated",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"message\": \"Plan pricing updated\",\n  \"plan\": {\n    \"network\": \"MTN\",\n    \"planId\": 1,\n    \"sellingPrice\": 450\n  }\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"errors\": [ { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"sellingPrice\", \"location\": \"body\" } ] \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to update plan pricing\" \n}"
        }
      ]
    },
    {
      "name": "Data Pricing - Bulk Update",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/data-pricing", "host": ["{{baseUrl}}"], "path": ["api","admin","data-pricing"] },
        "body": { "mode": "raw", "raw": "{\n  \"overrides\": {\n    \"MTN\": { \"1\": 450, \"2\": 700, \"3\": 1200 },\n    \"AIRTEL\": { \"25\": 500, \"27\": 900 }\n  }\n}" }
      },
      "response": [
        {
          "name": "200 OK - Bulk pricing updated",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"message\": \"Bulk pricing updated\",\n  \"overrides\": {\n    \"MTN\": { \"1\": 450, \"2\": 700, \"3\": 1200 },\n    \"AIRTEL\": { \"25\": 500, \"27\": 900 }\n  }\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"errors\": [ { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"overrides\", \"location\": \"body\" } ] \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to update overrides\" \n}"
        }
      ]
    },
    {
      "name": "Data Plans - Get User View",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/data-plans", "host": ["{{baseUrl}}"], "path": ["api","admin","data-plans"] }
      },
      "response": [
        {
          "name": "200 OK - User view of data plans",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"dataPlans\": {\n    \"MTN\": [\n      {\n        \"id\": 1,\n        \"title\": \"500MB\",\n        \"validity\": \"30days\",\n        \"type\": \"SME\",\n        \"price\": 450\n      },\n      {\n        \"id\": 2,\n        \"title\": \"1GB\",\n        \"validity\": \"30days\",\n        \"type\": \"SME\",\n        \"price\": 700\n      }\n    ],\n    \"AIRTEL\": [\n      {\n        \"id\": 25,\n        \"title\": \"1.1GB\",\n        \"validity\": \"30days\",\n        \"type\": \"SME\",\n        \"price\": 400\n      }\n    ]\n  }\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get data plans\" \n}"
        }
      ]
    },
    {
      "name": "Data Plans - Add New Plan",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/data-plans", "host": ["{{baseUrl}}"], "path": ["api","admin","data-plans"] },
        "body": { "mode": "raw", "raw": "{\n  \"network\": \"MTN\",\n  \"title\": \"20GB\",\n  \"retailPrice\": 8000,\n  \"validity\": \"30days\",\n  \"type\": \"SME\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - New plan created",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"message\": \"New data plan created\",\n  \"plan\": {\n    \"id\": 200,\n    \"title\": \"20GB\",\n    \"price\": 8000,\n    \"validity\": \"30days\",\n    \"type\": \"SME\"\n  },\n  \"note\": \"This plan needs to be manually added to the DATA_PLANS constant in flowEndpoint.js\"\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"errors\": [ { \"type\": \"field\", \"msg\": \"Invalid value\", \"path\": \"retailPrice\", \"location\": \"body\" } ] \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to add new data plan\" \n}"
        }
      ]
    },
    {
      "name": "Data Pricing - Clear Overrides",
      "request": {
        "method": "DELETE",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/data-pricing", "host": ["{{baseUrl}}"], "path": ["api","admin","data-pricing"] }
      },
      "response": [
        {
          "name": "200 OK - Overrides cleared",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"success\": true,\n  \"message\": \"Overrides cleared\" \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to clear overrides\" \n}"
        }
      ]
    },
    {
      "name": "Revenue - Stats",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/revenue/stats", "host": ["{{baseUrl}}"], "path": ["api","admin","revenue","stats"] }
      },
      "response": [
        {
          "name": "200 OK - All time revenue stats",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"streams\": {\n    \"transferOutFees\": 15000.00,\n    \"monthlyMaintenanceFees\": 50000.00,\n    \"dataMargin\": 75000.25,\n    \"airtimeMargin\": 2000\n  },\n  \"totalRevenue\": 142000.25\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to compute revenue stats\" \n}"
        }
      ]
    },
    {
      "name": "Transaction Requery",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/transactions/requery", "host": ["{{baseUrl}}"], "path": ["api","admin","transactions","requery"] },
        "body": { "mode": "raw", "raw": "{\n  \"reference\": \"TXN1758556925944_08JVJS0B2\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - Transaction status updated",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"message\": \"Transaction status updated successfully\",\n  \"transaction\": {\n    \"success\": true,\n    \"amount\": \"100.00\",\n    \"bankCode\": \"100004\",\n    \"bankName\": \"OPay\",\n    \"contractReference\": \"20220412FT0000000010\",\n    \"creditAccountNumber\": \"9072874728\",\n    \"debitAccountName\": \"MiiMii User\",\n    \"debitAccountNumber\": \"1000000975\",\n    \"narration\": \"Wallet transfer\",\n    \"paymentReference\": \"TXN1758556925944_08JVJS0B2\",\n    \"responseCode\": \"00\",\n    \"responseMessage\": \"SUCCESSFUL\"\n  }\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"errors\": [\n    {\n      \"type\": \"field\",\n      \"msg\": \"Transaction reference is required\",\n      \"path\": \"reference\",\n      \"location\": \"body\"\n    }\n  ]\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Transaction requery failed\" \n}"
        }
      ]
    },
    {
      "name": "User Transactions",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/users/{{userId}}/transactions?limit=20&offset=0", "host": ["{{baseUrl}}"], "path": ["api","admin","users","{{userId}}","transactions"], "query": [{"key":"limit","value":"20"},{"key":"offset","value":"0"}] }
      },
      "response": [
        {
          "name": "200 OK - User transactions",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"transactions\": [\n    {\n      \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n      \"reference\": \"TXN1758556925944_08JVJS0B2\",\n      \"type\": \"debit\",\n      \"category\": \"bank_transfer\",\n      \"amount\": 100,\n      \"fee\": 15,\n      \"status\": \"completed\",\n      \"description\": \"Bank transfer to John Doe\",\n      \"user\": {\n        \"firstName\": \"John\",\n        \"lastName\": \"Doe\",\n        \"whatsappNumber\": \"+2349072874728\"\n      },\n      \"createdAt\": \"2024-01-01T12:00:00.000Z\"\n    }\n  ],\n  \"total\": 25,\n  \"limit\": 20,\n  \"offset\": 0\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"errors\": [\n    {\n      \"type\": \"field\",\n      \"msg\": \"Invalid user ID\",\n      \"path\": \"userId\",\n      \"location\": \"params\"\n    }\n  ]\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get user transactions\" \n}"
        }
      ]
    },
    {
      "name": "Transaction Details",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/transactions/{{transactionId}}", "host": ["{{baseUrl}}"], "path": ["api","admin","transactions","{{transactionId}}"] }
      },
      "response": [
        {
          "name": "200 OK - Transaction details",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"transaction\": {\n    \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n    \"reference\": \"TXN1758556925944_08JVJS0B2\",\n    \"type\": \"debit\",\n    \"category\": \"bank_transfer\",\n    \"amount\": 100,\n    \"fee\": 15,\n    \"status\": \"completed\",\n    \"description\": \"Bank transfer to John Doe\",\n    \"user\": {\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"whatsappNumber\": \"+2349072874728\",\n      \"email\": \"john@example.com\"\n    },\n    \"wallet\": {\n      \"virtualAccountNumber\": \"1000000975\",\n      \"virtualAccountBank\": \"Rubies MFB\"\n    },\n    \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n    \"processedAt\": \"2024-01-01T12:00:10.000Z\"\n  }\n}"
        },
        {
          "name": "404 Not Found - Transaction not found",
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Transaction not found\" \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get transaction details\" \n}"
        }
      ]
    },
    {
      "name": "Dashboard Stats (Updated)",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/dashboard/stats", "host": ["{{baseUrl}}"], "path": ["api","admin","dashboard","stats"] }
      },
      "response": [
        {
          "name": "200 OK - Enhanced dashboard stats",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"stats\": {\n    \"users\": {\n      \"total\": 120,\n      \"active\": 95,\n      \"kycBreakdown\": [\n        { \"kycStatus\": \"verified\", \"count\": 110 },\n        { \"kycStatus\": \"pending\", \"count\": 2 },\n        { \"kycStatus\": \"incomplete\", \"count\": 5 },\n        { \"kycStatus\": \"rejected\", \"count\": 3 }\n      ]\n    },\n    \"transactions\": {\n      \"total\": 1540,\n      \"volume\": 1250000.5,\n      \"pending\": 7,\n      \"rubiesStats\": [\n        { \"status\": \"completed\", \"count\": 1200, \"totalAmount\": 1000000 },\n        { \"status\": \"pending\", \"count\": 5, \"totalAmount\": 5000 },\n        { \"status\": \"failed\", \"count\": 2, \"totalAmount\": 200 }\n      ]\n    },\n    \"support\": {\n      \"openTickets\": 3\n    }\n  }\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get dashboard stats\" \n}"
        }
      ]
    },
    {
      "name": "Push Notification",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/notifications/push", "host": ["{{baseUrl}}"], "path": ["api","admin","notifications","push"] },
        "body": { "mode": "raw", "raw": "{\n  \"title\": \"System Maintenance\",\n  \"message\": \"We will be performing scheduled maintenance on our servers from 2:00 AM to 4:00 AM. Some services may be temporarily unavailable.\",\n  \"type\": \"info\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - Notification sent",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"message\": \"Push notification sent\",\n  \"stats\": {\n    \"total\": 95,\n    \"successful\": 92,\n    \"failed\": 3\n  }\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"errors\": [\n    {\n      \"type\": \"field\",\n      \"msg\": \"Notification title is required\",\n      \"path\": \"title\",\n      \"location\": \"body\"\n    }\n  ]\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to send push notification\" \n}"
        }
      ]
    },
    {
      "name": "Support Tickets - List",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/support/tickets?status=open&limit=20&offset=0", "host": ["{{baseUrl}}"], "path": ["api","admin","support","tickets"], "query": [{"key":"status","value":"open"},{"key":"limit","value":"20"},{"key":"offset","value":"0"}] }
      },
      "response": [
        {
          "name": "200 OK - Support tickets",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"tickets\": [\n    {\n      \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n      \"subject\": \"Transfer Failed\",\n      \"description\": \"My transfer to 0803XXXXXXX failed\",\n      \"status\": \"open\",\n      \"priority\": \"medium\",\n      \"user\": {\n        \"firstName\": \"John\",\n        \"lastName\": \"Doe\",\n        \"whatsappNumber\": \"+2349072874728\"\n      },\n      \"createdAt\": \"2024-01-01T12:00:00.000Z\"\n    }\n  ],\n  \"total\": 15,\n  \"limit\": 20,\n  \"offset\": 0\n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get support tickets\" \n}"
        }
      ]
    },
    {
      "name": "Support Ticket - Update",
      "request": {
        "method": "PATCH",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/support/tickets/{{ticketId}}", "host": ["{{baseUrl}}"], "path": ["api","admin","support","tickets","{{ticketId}}"] },
        "body": { "mode": "raw", "raw": "{\n  \"status\": \"resolved\",\n  \"response\": \"Your transfer has been processed successfully. The funds have been credited to the recipient's account.\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - Ticket updated",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"message\": \"Support ticket updated successfully\",\n  \"ticket\": {\n    \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n    \"subject\": \"Transfer Failed\",\n    \"description\": \"My transfer to 0803XXXXXXX failed\",\n    \"status\": \"resolved\",\n    \"resolution\": \"Your transfer has been processed successfully. The funds have been credited to the recipient's account.\",\n    \"user\": {\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"whatsappNumber\": \"+2349072874728\"\n    },\n    \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n    \"updatedAt\": \"2024-01-01T12:30:00.000Z\"\n  }\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"errors\": [\n    {\n      \"type\": \"field\",\n      \"msg\": \"Invalid status\",\n      \"path\": \"status\",\n      \"location\": \"body\"\n    }\n  ]\n}"
        },
        {
          "name": "404 Not Found - Ticket not found",
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Support ticket not found\" \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to update support ticket\" \n}"
        }
      ]
    },
    {
      "name": "Support Ticket - Details",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/support/tickets/{{ticketId}}", "host": ["{{baseUrl}}"], "path": ["api","admin","support","tickets","{{ticketId}}"] }
      },
      "response": [
        {
          "name": "200 OK - Ticket details",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"ticket\": {\n    \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n    \"subject\": \"Transfer Failed\",\n    \"description\": \"My transfer to 0803XXXXXXX failed\",\n    \"status\": \"resolved\",\n    \"priority\": \"medium\",\n    \"resolution\": \"Your transfer has been processed successfully. The funds have been credited to the recipient's account.\",\n    \"user\": {\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"whatsappNumber\": \"+2349072874728\",\n      \"email\": \"john@example.com\"\n    },\n    \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n    \"updatedAt\": \"2024-01-01T12:30:00.000Z\"\n  }\n}"
        },
        {
          "name": "404 Not Found - Ticket not found",
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Support ticket not found\" \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to get support ticket details\" \n}"
        }
      ]
    },
    {
      "name": "Support Ticket - Create",
      "request": {
        "method": "POST",
        "header": [ { "key": "Authorization", "value": "Bearer {{ADMIN_TOKEN}}" }, { "key": "Content-Type", "value": "application/json" } ],
        "url": { "raw": "{{baseUrl}}/api/admin/support/tickets", "host": ["{{baseUrl}}"], "path": ["api","admin","support","tickets"] },
        "body": { "mode": "raw", "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"subject\": \"Transfer Failed\",\n  \"description\": \"My transfer to 0803XXXXXXX failed. The transaction was deducted from my account but the recipient didn't receive the funds.\",\n  \"priority\": \"high\"\n}" }
      },
      "response": [
        {
          "name": "200 OK - Ticket created",
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"success\": true,\n  \"message\": \"Support ticket created successfully\",\n  \"ticket\": {\n    \"id\": \"f2f1a0b2-1234-4a0c-9d1a-aaaa1111bbbb\",\n    \"subject\": \"Transfer Failed\",\n    \"priority\": \"high\",\n    \"status\": \"open\",\n    \"createdAt\": \"2024-01-01T12:00:00.000Z\"\n  }\n}"
        },
        {
          "name": "400 Bad Request - Validation error",
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "body": "{\n  \"errors\": [\n    {\n      \"type\": \"field\",\n      \"msg\": \"Valid user ID is required\",\n      \"path\": \"userId\",\n      \"location\": \"body\"\n    },\n    {\n      \"type\": \"field\",\n      \"msg\": \"Subject is required\",\n      \"path\": \"subject\",\n      \"location\": \"body\"\n    }\n  ]\n}"
        },
        {
          "name": "404 Not Found - User not found",
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"User not found\" \n}"
        },
        {
          "name": "401 Unauthorized",
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Unauthorized\" \n}"
        },
        {
          "name": "500 Server Error",
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "body": "{ \n  \"error\": \"Failed to create support ticket\" \n}"
        }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "https://api.chatmiimii.com" },
    { "key": "ADMIN_EMAIL", "value": "admin@chatmiimii.com" },
    { "key": "ADMIN_PASSWORD", "value": "Musa$2025" },
    { "key": "ADMIN_TOKEN", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "transactionId", "value": "" },
    { "key": "ticketId", "value": "" },
    { "key": "startDate", "value": "" },
    { "key": "endDate", "value": "" }
  ]
}


