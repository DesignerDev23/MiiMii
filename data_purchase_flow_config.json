{
  "version": "7.2",
  "data_api_version": "3.0",
  "routing_model": {
    "NETWORK_SELECTION_SCREEN": ["PHONE_INPUT_SCREEN"],
    "PHONE_INPUT_SCREEN": ["DATA_PLAN_SELECTION_SCREEN"],
    "DATA_PLAN_SELECTION_SCREEN": ["CONFIRMATION_SCREEN"],
    "CONFIRMATION_SCREEN": ["PIN_VERIFICATION_SCREEN"],
    "PIN_VERIFICATION_SCREEN": []
  },
  "screens": [
    {
      "id": "NETWORK_SELECTION_SCREEN",
      "title": "Select Network",
      "data": {},
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "network_selection_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "Select Network"
              },
              {
                "type": "TextBody",
                "text": "Choose the network for your data purchase:"
              },
              {
                "type": "RadioButtonsGroup",
                "required": true,
                "label": "Network",
                "name": "network",
                "data-source": [
                  {
                    "id": "MTN",
                    "title": "MTN"
                  },
                  {
                    "id": "AIRTEL",
                    "title": "Airtel"
                  },
                  {
                    "id": "GLO",
                    "title": "Glo"
                  },
                  {
                    "id": "9MOBILE",
                    "title": "9mobile"
                  }
                ]
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "network": "${form.network}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "PHONE_INPUT_SCREEN",
      "title": "Enter Phone Number",
      "data": {
        "network": {
          "type": "string",
          "value": "",
          "__example__": "MTN"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "phone_input_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "Enter Phone Number"
              },
              {
                "type": "TextBody",
                "text": "Enter the phone number for data purchase:"
              },
              {
                "type": "TextInput",
                "required": true,
                "label": "Phone Number",
                "name": "phoneNumber",
                "input-type": "text",
                "helper-text": "Enter 11-digit phone number (e.g., 08012345678)"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "network": "${data.network}",
                    "phoneNumber": "${form.phoneNumber}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "DATA_PLAN_SELECTION_SCREEN",
      "title": "Select Data Plan",
      "data": {
        "network": {
          "type": "string",
          "value": "",
          "__example__": "MTN"
        },
        "phoneNumber": {
          "type": "string",
          "value": "",
          "__example__": "08012345678"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "data_plan_selection_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "Select Data Plan"
              },
                             {
                 "type": "TextBody",
                 "text": "Choose a data plan:"
               },
              {
                "type": "RadioButtonsGroup",
                "required": true,
                "label": "Data Plan",
                "name": "dataPlan",
                                 "data-source": [
                   {
                     "id": "loading",
                     "title": "Loading plans..."
                   }
                 ]
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "network": "${data.network}",
                    "phoneNumber": "${data.phoneNumber}",
                    "dataPlan": "${form.dataPlan}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "CONFIRMATION_SCREEN",
      "title": "Confirm Purchase",
      "data": {
        "network": {
          "type": "string",
          "value": "",
          "__example__": "MTN"
        },
        "phoneNumber": {
          "type": "string",
          "value": "",
          "__example__": "08012345678"
        },
        "dataPlan": {
          "type": "string",
          "value": "",
          "__example__": "1GB-300"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "confirmation_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "Confirm Data Purchase"
              },
                             {
                 "type": "TextBody",
                 "text": "Please confirm your data purchase details above."
               },
              {
                "type": "RadioButtonsGroup",
                "required": true,
                "label": "Confirm",
                "name": "confirm",
                "data-source": [
                  {
                    "id": "yes",
                    "title": "✅ Yes, proceed with purchase"
                  },
                  {
                    "id": "no",
                    "title": "❌ No, let me change something"
                  }
                ]
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "network": "${data.network}",
                    "phoneNumber": "${data.phoneNumber}",
                    "dataPlan": "${data.dataPlan}",
                    "confirm": "${form.confirm}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "PIN_VERIFICATION_SCREEN",
      "title": "Enter PIN",
      "terminal": true,
      "success": true,
      "data": {
        "network": {
          "type": "string",
          "value": "",
          "__example__": "MTN"
        },
        "phoneNumber": {
          "type": "string",
          "value": "",
          "__example__": "08012345678"
        },
        "dataPlan": {
          "type": "string",
          "value": "",
          "__example__": "1GB-300"
        },
        "confirm": {
          "type": "string",
          "value": "",
          "__example__": "yes"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "pin_verification_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "Enter PIN"
              },
              {
                "type": "TextBody",
                "text": "Enter your 4-digit PIN to complete the data purchase."
              },
              {
                "type": "TextInput",
                "required": true,
                "label": "PIN",
                "name": "pin",
                "input-type": "passcode"
              },
              {
                "type": "Footer",
                "label": "Purchase Data",
                "on-click-action": {
                  "name": "complete",
                  "payload": {
                    "network": "${data.network}",
                    "phoneNumber": "${data.phoneNumber}",
                    "dataPlan": "${data.dataPlan}",
                    "pin": "${form.pin}"
                  }
                }
              }
            ]
          }
        ]
      }
    }
  ]
}
